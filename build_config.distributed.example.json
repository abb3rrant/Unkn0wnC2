{
  "_comment": "Example configuration for DISTRIBUTED (Shadow Mesh) deployment",
  "_comment2": "Copy this to build_config.json and customize for your infrastructure",
  
  "project": {
    "name": "Unkn0wnC2",
    "version": "0.2.0",
    "description": "DNS-based Command & Control Framework - Distributed Mode"
  },
  
  "deployment": {
    "mode": "distributed",
    "dns_servers": [
      {
        "id": "dns-1",
        "domain": "secwolf.net",
        "bind_addr": "172.26.13.62",
        "bind_port": 53,
        "server_address": "98.90.218.70",
        "ns1": "ns1.secwolf.net",
        "ns2": "ns2.secwolf.net",
        "forward_dns": true,
        "upstream_dns": "8.8.8.8:53",
        "debug": false
      },
      {
        "id": "dns-2",
        "domain": "example.com",
        "bind_addr": "10.0.1.50",
        "bind_port": 53,
        "server_address": "203.0.113.10",
        "ns1": "ns1.example.com",
        "ns2": "ns2.example.com",
        "forward_dns": true,
        "upstream_dns": "1.1.1.1:53",
        "debug": false
      },
      {
        "id": "dns-3",
        "domain": "testdomain.org",
        "bind_addr": "192.168.1.100",
        "bind_port": 53,
        "server_address": "198.51.100.20",
        "ns1": "ns1.testdomain.org",
        "ns2": "ns2.testdomain.org",
        "forward_dns": true,
        "upstream_dns": "8.8.4.4:53",
        "debug": false
      }
    ],
    "master": {
      "enabled": true,
      "bind_addr": "0.0.0.0",
      "bind_port": 8443,
      "public_url": "https://100.100.1.2:8443",
      "tls_cert": "certs/master.crt",
      "tls_key": "certs/master.key",
      "jwt_secret": "CHANGE-THIS-TO-RANDOM-64-CHAR-STRING",
      "session_timeout": 480,
      "database_path": "master.db",
      "admin_username": "admin",
      "admin_password": "CHANGE-THIS-STRONG-PASSWORD",
      "debug": false,
      "dns_servers_config": [
        {
          "id": "dns-1",
          "domain": "secwolf.net",
          "address": "https://dns-1.yourinfra.com:443",
          "api_key": "CHANGE-THIS-API-KEY-1"
        },
        {
          "id": "dns-2",
          "domain": "example.com",
          "address": "https://dns-2.yourinfra.com:443",
          "api_key": "CHANGE-THIS-API-KEY-2"
        },
        {
          "id": "dns-3",
          "domain": "testdomain.org",
          "address": "https://dns-3.yourinfra.com:443",
          "api_key": "CHANGE-THIS-API-KEY-3"
        }
      ]
    }
  },
  
  "server": {
    "_comment": "Legacy config - kept for backwards compatibility",
    "bind_addr": "172.26.13.62",
    "bind_port": 53,
    "server_address": "98.90.218.70",
    "domain": "secwolf.net",
    "ns1": "ns1.secwolf.net",
    "ns2": "ns2.secwolf.net",
    "forward_dns": true,
    "upstream_dns": "8.8.8.8:53",
    "debug": false
  },
  
  "client": {
    "server_domain": "secwolf.net",
    "dns_domains": [
      "secwolf.net",
      "example.com",
      "testdomain.org"
    ],
    "domain_selection_mode": "random",
    "dns_server": "",
    "query_type": "TXT",
    "encoding": "aes-gcm-base36",
    "timeout": 10,
    "max_command_length": 400,
    "retry_attempts": 3,
    "sleep_min": 60,
    "sleep_max": 120,
    "exfil_jitter_min_ms": 10000,
    "exfil_jitter_max_ms": 30000,
    "exfil_chunks_per_burst": 5,
    "exfil_burst_pause_ms": 120000
  },
  
  "stager": {
    "jitter_min_ms": 1000,
    "jitter_max_ms": 2000,
    "chunks_per_burst": 5,
    "burst_pause_ms": 12000,
    "retry_delay_seconds": 3,
    "max_retries": 5
  },
  
  "security": {
    "encryption_key": "CHANGE-THIS-TO-STRONG-RANDOM-KEY-32-CHARS"
  },
  
  "build": {
    "output_dir": "build",
    "targets": {
      "master": {
        "linux": {
          "enabled": true,
          "output": "master-server-linux"
        }
      },
      "server": {
        "linux": {
          "enabled": true,
          "output": "dns-server-linux"
        }
      },
      "client": {
        "windows": {
          "enabled": true,
          "output": "dns-client-windows.exe"
        },
        "linux": {
          "enabled": true,
          "output": "dns-client-linux"
        }
      }
    }
  }
}
